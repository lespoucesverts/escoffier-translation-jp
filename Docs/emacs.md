# Emacs, pandoc, Lualatex を使うPDF組版

![](img/emacs-001.png)

どうです? このスクリーンショット。左が Emacs 、右が Skim App という PDF 閲覧用アプリです。Macの「全画面表示」を二分割しています。

見た目だけなら Atom に決してひけをとらないと思います。そして機能は Atom 以上、ただちょっとクセがあるのが難点。Ctrl キーをESCまたはOptionキーをやたら多用します。それがクセです。あと設定は Emacs Lisp というプログラム言語で書かなきゃいけない。でも、基本的にコピペでどうにかなっちゃいます。

そんなわけで、いきなりこういう見た目で作業性よく出来るというわけじゃありません。インストールしただけの「素の Emacs 」は相当にショボいです。これにいくつかのパッケージ（追加プログラム）を入れて、「設定ファイルを書く」と上のスクリーンショットのようになるわけです。しかも、まるっきり「素」の状態で Mac の場合には日本語入力にやや難があるという話もあるようです（僕はまるっきり「素」では使わないので気づいたことがありません）

![](img/emacs-002.png)

## 推奨環境

* Macintosh ……現行の25.3 は OS 10.9 以降だったと思いますので、それ以前の OS のままの古い Mac の場合はバージョン 24.3 あたりを使えばだいたい問題ないと思います。
* Ubuntu Linux ……フォント設定のところが変わります。
* Windows …… 説明できません。ごめんなさい。

## 必要なアプリ、フォント

* Emacs ……各OSに対応したものがあります。
* pandoc
* LuaLatex, luatexja
* IPAフォント
* MoboMogaフォント
* Lualatex, luatexja を含む TeX 一式

### おすすめ日本語入力 SKK

* Mac 用 [Aquaskk](https://github.com/codefirst/aquaskk/releases)
* Windows 用 [corvuskk](https://github.com/nathancorvussolis/corvusskk)
* Ubuntu 用 ibus-skk ……Ubuntuで apt install を使ってインストール可能

「連文節変換」とか「予測変換」なんて機能はいっさいなし。漢字にしたい語句を打つときに 最初の文字だけshift キーと同時押しでローマ字入力してスペースキーを押してその語句を変換するというまことに単純明快な入力方式。とはいえ、設定次第では「予測変換」も「送りかな」もちゃんと使えるので、慣れると一般的な連文節変換の3倍以上早く変換できるようになります。

**ブラインドタッチ** で日本語のローマ字入力ができる場合は絶大な入力効率と、自分自身の文体の保持が出来ます。ある意味で「手書き」で日本語を書く感覚に近いです。

そして、Emacs といえば SKK なんです。いや、ほかにも日本語の入力方式はいろいろあるし、多少の難があるという**うわさ**はあるけどOS標準の日本語入力が通るってことらしいんで、無理にとは申しませんが、そもそも SKK は Emacs 用に開発されたものらしいんで。

これも慣れると手放せなくなるプログラムです。

### pandoc

文書形式変換プログラムです。http://pandoc.org/ から各OS用のものが DL 出来ます。コマンドライン（つまり「ターミナル」にコマンドを入力して使う）プログラムです。が、いちいちコマンドを入力するのも面倒、という場合に Emacs のパッケージ pandoc-mode を使います。そうすればコマンドを覚えていなくても、メニューから選択して実行できますし、慣れればショートカットキー操作でほんの3ストロークくらいで文書変換が可能になります。

対応しているフォーマットは入力側が、このプロジェクトで使っている Pandoc Extended Markdown の他いろいろ、出力側も TeX, PDF, docx, html, epub などものすごくたくさんの種類があります。


### LaTeX

Markdown 書式の原稿から、今回のプロジェクトで作っているようなレイアウトのPDFと索引、目次、文献一覧などを**自動で**組版するために使うプログラム群です。各OS用があり、おなじ LaTeX でもいろんな種類があります。この「全注解」プロジェクトでは LuaLatex というのを使っています。

詳しくは「[TeX-Wiki（日本語）]（https://texwiki.texjp.org/）にいろいろ情報が出ています。

Mac の場合は [TeXLive](https://www.tug.org/mactex/)を一式入れてしまうのが簡単でしょう。Basic TeX といって「最小構成」でインストールして必要なパッケージを追加で入れていくことも可能です（僕はその方式です）が、初心者には何が必要なパッケージなのかわからないことも多いようなので、とにかく一式、といっても 2 GB くらいでフリーのフォントなどもインストール出来ちゃいます。
